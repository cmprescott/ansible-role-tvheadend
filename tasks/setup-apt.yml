---
# tasks file for apt setup tvheadend


- name: "setup | apt | ensure Tvheadend requirements"
  apt: name={{ item }} state=installed
  with_items:
    - debconf
    - debconf-utils
    - linux-firmware-nonfree


- name: "setup | apt | ensure Tvheadend repository gpg key"
  apt_key: url=http://apt.tvheadend.org/repo.gpg.key keyring=/etc/apt/trusted.gpg.d/tvheadend.gpg state=present


- name: "setup | apt | ensure Tvheadend repository"
  apt_repository: repo='deb http://apt.tvheadend.org/unstable trusty main' state=present update_cache=yes


- name: "setup | apt | ensure Tvheadend User"
  debconf: name=tvheadend question=tvheadend/admin_username vtype=string value=admin


- name: "setup | apt | ensure Tvheadend Password"
  debconf: name=tvheadend question=tvheadend/admin_password vtype=password value=admin


- name: "setup | apt | ensure Tvheadend pkg"
  apt: name=tvheadend state=installed


...